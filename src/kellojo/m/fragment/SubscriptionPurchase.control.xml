<core:FragmentDefinition xmlns="sap.m"
    xmlns:core="sap.ui.core"
    core:require="{ formatMessage: 'sap/base/strings/formatMessage' }"
    xmlns:kM="kellojo.m" width="100%" height="100%">

    <NavContainer id="idNavContainer" class="kellojoMSubscriptionPurchase-navContainer">

        <Page id="idSubscriptionPage" showHeader="false" busy="{$this>/isPurchasing}">
            <kM:Wrapper class="kellojoMSubscriptionPurchase-Page">
                <Label text="{$this>chooseSubscriptionTitle}" class="kellojoMSubscriptionPurchase-title"/>
                <Label text="{ parts: ['$this>/chooseSubscriptionDetailsText', '$this>/appName'], formatter: 'formatMessage'}" class="kellojoMSubscriptionPurchase-details"/>

                <kM:SubscriptionContainer content="{$this>/subscriptions}">
                    <kM:SubscriptionTile name="{$this>name}" 
                        color="{$this>color}"
                        price="{$this>formattedPrice}"
                        content="{$this>benefits}">
                        <kM:content>
                            <kM:Label src="{$this>icon}" text="{$this>text}" iconValueState="{$this>valueState}"/>
                        </kM:content>

                        <kM:submitButton>
                            <Button type="Emphasized" text="{$this>/subscribeText}" enabled="{= !${$this>owned} &amp;&amp; !${$this>/isPurchasing} }" press="onSubscribeButtonPress">
                                <customData>
                                    <core:CustomData key="subscription" value="{$this>}"/>
                                </customData>
                            </Button>
                        </kM:submitButton>
                    </kM:SubscriptionTile>
                </kM:SubscriptionContainer>
                
                <Link text="{$this>/skipText}" class="kellojoMSubscriptionPurchase-remindMeLink" press="fireSkipSubscription"/>
            </kM:Wrapper>   
        </Page>

        <Page id="idSubscriptionPurchasedPage">
        
        </Page>
    </NavContainer>

</core:FragmentDefinition>